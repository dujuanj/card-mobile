<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link
        rel="stylesheet"
        href="https://fastly.jsdelivr.net/npm/vant@4/lib/index.css"
        />
    <link rel="stylesheet" href="css/common.css">
</head>
<body>
    <div id="app"></div>
    <script src="https://fastly.jsdelivr.net/npm/vue@3"></script>
    <script src="https://fastly.jsdelivr.net/npm/vant@4/lib/vant.min.js"></script>

    <script>
  const { ref,computed } = Vue;
  const app = Vue.createApp({
    setup() {
          const showShare = ref(false);
          const passwordVisible = ref(false)
          const passwordVisible1 = ref(false)
          const value1 = ref('胡龙美');
          const value2 = ref('2024-10-16');
          const value3 = ref('00:00-02:00');
          const value4 = ref('210506199009070954');
          const value5 = ref('胡龙美');
          const value6 = ref('13456789760');
          const value7 = ref('210506199009070954');
          const value8 = ref('粤A555E7');
          const value9 = ref('202447285729877592');
          const value10 = ref('Z4680241015070615941900869')
          const value11 = ref('2024-10-15 07:06:14');
          const value12 = ref('￥15');
          const edit = ref (true);
          const lastClickTime = ref(0); // 用于记录上次点击时间
          const doubleClickThreshold = 300; // 双击时间间隔，单位毫秒

          const handleClick = () => {
                const currentTime = new Date().getTime();
                if (currentTime - lastClickTime.value < doubleClickThreshold) {
                handleDoubleClick(); // 如果两次点击间隔小于设定的阈值，则触发双击事件
                }
                lastClickTime.value = currentTime; // 更新上次点击时间
            }; 
          
          const maskedValue = computed(() => {
                const value = value4.value;
                if (value.length > 7) {
                    return value.slice(0, 4) + '*'.repeat(value.length - 7) + value.slice(-3);
                }
                return value; // 如果输入长度不足以隐藏字符，返回原始值
                });
                const maskedValue6 = computed(() => {
                const value = value6.value;
                if (value.length > 7) {
                    return value.slice(0, 3) + '*'.repeat(value.length - 7) + value.slice(-4);
                }
                return value; // 如果输入长度不足以隐藏字符，返回原始值
                });
                const maskedValue7 = computed(() => {
                const value = value7.value;
                if (value.length > 7) {
                    return value.slice(0, 4) + '*'.repeat(value.length - 7) + value.slice(-3);
                }
                return value; // 如果输入长度不足以隐藏字符，返回原始值
                });
                 const maskedCarNumber = computed(() => {
                    const value = value8.value;
                    if (value.length > 3) {
                        return value.slice(0, 2) + '*'.repeat(value.length - 3) + value.slice(-1);
                    }
                    return value; // 如果输入长度不足以隐藏字符，返回原始值
                    });
          const handleInfo = () => {
            showShare.value = true;
          };
           const togglePasswordVisibility = () => {
            passwordVisible.value = !passwordVisible.value;
          };
          const togglePasswordVisibility1 = () => {
            passwordVisible1.value = !passwordVisible1.value;
          };

          const handleDoubleClick=()=>{
            edit.value=false
          }
          return {
            showShare,
            handleInfo,
            passwordVisible,
            passwordVisible1,
            value1,
            value2,
            value3,
            value4,
            value5,
            value6,
            value7,
            value8,
            value9,
            value10,
            value11,
            value12,
            maskedValue,
            maskedValue6,
            maskedValue7,
            maskedCarNumber,
            edit,
            togglePasswordVisibility,
             togglePasswordVisibility1,
             handleDoubleClick,
             lastClickTime,
             doubleClickThreshold,
             handleClick
          };
        },
    template: `
    <div>
       <van-nav-bar title="订单详情"  >
             <template #left>
               <van-icon name="cross" size="18" style='color:#333'/>
            </template>
            <template #right>
                <van-icon name="ellipsis"  size="18" style='color:#333'/>
    
            </template>
       </van-nav-bar>
        <div class='info'>
                        <span>待消费</span>
                    </div>
        <van-list
            finished-text="没有更多了"
            :border="false"
            >
            <van-cell :border="false" >
                <template #default>
                  
                    <div class="custom-content flex space-between">
                        <h3>白云山进山车辆预约</h3>
                        <h3 class='normal'>￥15</h3>
                    </div>
                </template>
            </van-cell>
            <van-cell :border="false">
                <template #default>
                    <div class="custom-content">
                        <span>待消费</span>
                        <h3 class='my-5'>进山车辆预约0829</h3>
                        <van-row class="row-spacing">
                            <van-col span="5">游玩日期</van-col>
                            <van-col span="10" offset="4" ><van-field  v-model="value2" placeholder=""  />
                                <!-- <div class='black'>2024-10-16</div> -->
                                 
                            </van-col>
                             <van-col span="5" class='right main_color'>x1</van-col>
                        </van-row>
                        <van-row class="row-spacing">
                            <van-col span="5">分时时段</van-col>
                            <van-col span="10" offset="4" >
                                <!-- <div class='black'>00:00-02:00</div> -->
                                <van-field  v-model="value3" placeholder=""  />
                            </van-col>
                        </van-row>
                        <van-row class="row-spacing">
                            <van-col span="5">已检票</van-col>
                            <van-col span="10" offset="4" >
                                <div class='black'>1</div>
                            </van-col>
                        </van-row>
                        <van-row class="row-spacing">
                            <van-col span="5">已退票</van-col>
                            <van-col span="10" offset="4" >
                                <div class='black'>0</div>
                            </van-col>
                        </van-row>
                    </div>
                </template>
            </van-cell>
            <van-cell :border="false">
                 <template #default>
                    <div class='right'>
                        <van-button size="small" plain hairline type="warning"
                             @click='handleInfo'
                        >查看二维码</van-button>
                    </div>
                 </template>
            </van-cell>
            <van-cell :border="false">
                 <template #default>
                    <div class='custom-content'>
                        <van-row class="row-spacing">
                            <van-col span="5">游玩人</van-col>
                            <van-col span="15" offset="4" >
                                <div class='black flex'>
                                    <van-field  v-model="value1" placeholder=""  />
                                   
                                    <span class='f-right'>
                                        <van-icon
                                            color="blue"
                                            v-bind:name="passwordVisible ? 'eye-o' : 'closed-eye'"
                                            @click="togglePasswordVisibility"
                                            />
                                    </span>
                                </div>
                            </van-col>
                        </van-row>
                        <van-row class="row-spacing">
                            <van-col span="5">身份证号</van-col>
                            <van-col span="15" offset="4" >
                                <div class='black'>
                                    <span v-if='passwordVisible'>
                                         <van-field  v-model="value4" placeholder=""  />
                                    </span>
                                    <span v-else>
                                        <van-field :model-value="maskedValue" readonly />
                                    </span>
                                   
                                </div>
                                 
                            </van-col>
                        </van-row>
                    </div>
                 </template>
            </van-cell>
            
             <van-cell :border="false">
                <template #default>
                    <div class="custom-content">
                        <h3 class='my-5'>取票人信息</h3>
                        <van-row class="row-spacing">
                            <van-col span="5">姓名</van-col>
                            <van-col span="15" offset="4" >
                                <div class='black flex'>
                                        <van-field  v-model="value5" placeholder=""  />
                                  
                                   
                                    <span class='f-right'>
                                        <van-icon
                                            color="blue"
                                            v-bind:name="passwordVisible1 ? 'eye-o' : 'closed-eye'"
                                            @click="togglePasswordVisibility1"
                                            />
                                    </span>
                                </div>
                            </van-col>
                        </van-row>
                        <van-row class="row-spacing">
                            <van-col span="5">手机号</van-col>
                            <van-col span="10" offset="4" >
                                 <div class='black'>
                                    <span v-if='passwordVisible1'>
                                         <van-field  v-model="value6" placeholder=""  />
                                    </span>
                                    <span v-else>
                                        <van-field :model-value="maskedValue6" readonly />
                                    </span>
                                   
                                </div>
                            </van-col>
                        </van-row>
                        <van-row class="row-spacing">
                            <van-col span="5">身份证号</van-col>
                            <van-col span="15" offset="4" >
                                 <div class='black'>
                                    <span v-if='passwordVisible1'>
                                         <van-field  v-model="value7" placeholder=""  />
                                    </span>
                                    <span v-else>
                                        <van-field :model-value="maskedValue7" readonly />
                                    </span>
                                   
                                </div>
                            </van-col>
                        </van-row>
                        <van-row class="row-spacing">
                            <van-col span="5">车牌号</van-col>
                            <van-col span="10" offset="4" >
                                <div class='black'>
                                     <span v-if='edit'>{{value8}}</span>
                                     <van-field v-else  v-model="value8" placeholder=""  />
                                     <!-- <span v-if='passwordVisible1'>
                                         <van-field  v-model="value8" placeholder=""  />
                                    </span>
                                    <span v-else>
                                        <van-field :model-value="maskedCarNumber" readonly />
                                    </span> -->
                                </div>
                            </van-col>
                        </van-row>
                    </div>
                </template>
            </van-cell>

             <van-cell :border="false">
                <template #default>
                    <div class="custom-content">
                        <h3 class='my-5'>订单信息</h3>
                       
                        <van-row class="row-spacing">
                            <van-col span="5">订单编号</van-col>
                            <van-col span="15" offset="4" >
                                <div class='black flex'>
                                     <van-field  v-model="value9" placeholder=""  />
                                     <span class='copy'>复制</span>
                                </div>
                            </van-col>
                        </van-row>
                        <van-row class="row-spacing">
                            <van-col span="5">支付流水号</van-col>
                            <van-col span="15" offset="4" >
                                <div class='black'>
                                     <van-field  v-model="value10" placeholder=""  />
                                     <span class='copy'>复制</span>
                                </div>
                            </van-col>
                        </van-row>
                        <van-row class="row-spacing">
                            <van-col span="5">下单时间</van-col>
                            <van-col span="10" offset="4" >
                                <div class='black'>
                                     <van-field  v-model="value11" placeholder=""  />
                                </div>
                            </van-col>
                        </van-row>
                         <van-row class="row-spacing">
                            <van-col span="5">实付金额</van-col>
                            <van-col span="10" offset="4" >
                                <div class='black flex'>
                                     <van-field  v-model="value12" placeholder="" style='width:45px'  />
                                     <span class='copy'>明细</span>
                                </div>
                            </van-col>
                        </van-row>
                    </div>
                </template>
            </van-cell>
            <van-cell :border="false">
                 <template #default>
                    <div class='right mb_45'>
                        <van-button size="small" plain hairline type="warning">再来一单</van-button>
                    </div>
                 </template>
            </van-cell>
            </van-list>

            <van-action-bar>
                 <van-cell :border="false">
                 <template #default>
                    <div class='right'>
                        <van-button size="small" plain hairline type="warning" @click="handleClick">申请退款</van-button>
                    </div>
                 </template>
            </van-cell>
            </van-action-bar>


            <van-share-sheet
                v-model:show="showShare"
                :options="options"
                title="查看二维码"
            >
                <template #description>
                    <div>
                        <h3 class='black normal'>进山车辆预约0829</h3>
                        <p>辅助码</p>
                        <div>
                            <img src='img/code.webp' width='150' />
                            <p>已使用 0 | 未使用 1</p>
                        </div>
                        <van-row class="row-spacing mt_30" :gutter="[20, 20]">
                            <van-col span="12" class='black'>订单编号</van-col>
                            <van-col span="12" class='black right'>
                                 <van-field  v-model="value9" placeholder=""  />
                            </van-col>
                            <van-col span="12" class='black'>游玩日期</van-col>
                            <van-col span="12" class='black right'>
                                 <van-field  v-model="value11" placeholder=""  />
                            </van-col>
                            <van-col span="12" class='black'>购票数量</van-col>
                            <van-col span="12" class='black right'>4</van-col>
                        </van-row>
                    </div>
                </template>
        </van-share-sheet>
    </div>`,
  });
  app.use(vant);
  app.use(vant.Lazyload);
  app.mount('#app');
</script>
</body>
</html>